<form class="mrgn-tp-md" role="form" [formGroup]="form">
  <ng-container *ngFor="let row of rows.controls; let i = index" formArrayName="rows">
    <div class="d-flex flex-wrap mrgn-bttm-sm" [formGroupName]="i">
      <select id="filter-item-{{i+1}}" name="filter-item-{{i+1}}" class="form-control mrgn-rght-sm" attr.aria-label="{{'comcol.search.filter.aria.filter.item' | translate}}"  formControlName="filtertype" required>
        <option [attr.aria-disabled]="'true'" [disabled]="true" value="">{{'comcol.search.filter.item.select' | translate}}</option>
        <option value="title">{{'comcol.search.filter.item.title' | translate}}</option>
        <option value="author">{{'comcol.search.filter.item.author' | translate}}</option>
        <option value="subject">{{'comcol.search.filter.item.subject' | translate}}</option>
        <option value="dateIssued">{{'comcol.search.filter.item.date.issued' | translate}}</option>
      </select>

      <select id="filter-operator-{{i+1}}" name="filter-operator-{{i+1}}" class="form-control mrgn-rght-sm" attr.aria-label="{{'comcol.search.filter.aria.filter.operator' | translate}}" formControlName="relationalOperator" required>
        <option [attr.aria-disabled]="'true'" [disabled]="true" value="">{{'comcol.search.filter.item.select' | translate}}</option>
        <option value="contains">{{'comcol.search.filter.operator.contains' | translate}}</option>
        <option value="notcontains">{{'comcol.search.filter.operator.not.contains' | translate}}</option>
        <option  value="equals">{{'comcol.search.filter.operator.equals' | translate}}</option>
        <option value="notequals">{{'comcol.search.filter.operator.not.equals' | translate}}</option>
      </select>

      <!-- input class="mrgn-rght-sm form-control flex-grow-1" id="filter-item-info-{{i+1}}" name="filter-item-info-{{i+1}}" type="text" aria-label="Filter Value" formControlName="filter" -->
      <ng-container [ngSwitch]="row.get('filtertype')?.value">
        <input *ngSwitchDefault type="text" name="filterValue" id="filter-item-info-{{i+1}}" aria-label="Filter Value" formControlName="filter"
          class="mrgn-rght-sm form-control flex-grow-1"/>
        <select *ngSwitchCase="'subject'" name="filterValue" id="filter-item-infos-{{i+1}}" aria-label="Filter Value" formControlName="filter" class="mrgn-rght-sm form-control flex-grow-1">
          <option value="Arts, Music, Literature">Arts, Music, Literature</option>
          <option value="Agriculture">Agriculture</option>
          <option value="Economics and Industry">Economics and Industry</option>
          <option value="Education and Training">Education and Training</option>
          <option value="Form descriptors">Form descriptors</option>
          <option value="Government and Politics">Government and Politics</option>
          <option value="Health and Safety">Health and Safety</option>
          <option value="History and Archaeology">History and Archaeology</option>
          <option value="Information and Communications">Information and Communications</option>
          <option value="Labour">Labour</option>
          <option value="Language and Linguistics ">Language and Linguistics </option>
          <option value="Law">Law</option>
          <option value="Military">Military</option>
          <option value="Nature and Environment">Nature and Environment</option>
          <option value="Persons">Persons</option>
          <option value="Processes">Processes</option>
          <option value="Society and Culture">Society and Culture</option>
          <option value="Science and Technology">Science and Technology</option>
          <option value="Transport">Transport</option>
          <option value="Air">Air</option>
          <option value="Biodiversity">Biodiversity</option>
          <option value="Climate">Climate</option>
          <option value="Economy and industry">Economy and industry</option>
          <option value="Health">Health</option>
          <option value="Land">Land</option>
          <option value="Water">Water</option>
        </select>
      </ng-container>

      <button type="button" (click)="addRow()" class="btn btn-default btn-sm mrgn-rght-sm" >
        <span class="glyphicon glyphicon-plus"></span><span class="wb-inv"> + </span>
      </button>

      <button type="button" (click)="removeRow(i)" class="btn btn-default btn-sm">
        <span class="glyphicon glyphicon-remove"></span> <span class="wb-inv">remove</span></button>

    </div>
  </ng-container>
  <div class="mrgn-tp-md">
    <button id="apply-filters" name="submit-apply-filters" type="button"  class="btn btn-primary mrgn-rght-md" (click)="addRow()"> + </button>
    <button id="reset-filters" name="reset-filters" type="button" class="btn btn-default" (click)="resetFilters()"><span class="fa fa-undo" aria-hidden="true"></span> Reset Filters </button>
    <button id="debug" name="debug" type="button" class="btn btn-default" (click)="printFormValues()"><span class="fa fa-undo" aria-hidden="true"></span> Debug </button>
  </div>
  <!--
  <div class="buttons">
    <button type="button" (click)="printFormValues()" class="btn btn-primary search-button">Search</button>
  </div>-->
</form>
<!-- debug
<div>
  <h2>
  search string: <span class="output" > {{output}}</span>
  </h2>
</div>
-->
